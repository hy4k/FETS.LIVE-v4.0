commit d9734bee8b65c5fb0bfdddddacfa7c4c54481480
Author: hy4k <mithun@fets.in>
Date:   Mon Feb 2 18:09:20 2026 +0530

    feat: Add create-staff-user Edge Function for staff creation
    
    - Created new create-staff-user Edge Function
    - Function creates auth user and staff profile in single transaction
    - Includes rollback on profile creation failure
    - Sets default permissions based on role
    - Improved error handling in useStaffManagement hook

diff --git a/fets-point/src/hooks/useStaffManagement.ts b/fets-point/src/hooks/useStaffManagement.ts
index 846f4b5..f7a6f3b 100644
--- a/fets-point/src/hooks/useStaffManagement.ts
+++ b/fets-point/src/hooks/useStaffManagement.ts
@@ -29,10 +29,23 @@ const addStaff = async (newStaffData: Omit<StaffProfile, 'id' | 'created_at'> &
     body: newStaffData,
   })
 
+  // Log for debugging
+  console.log('Create staff user response:', { data, error })
+
   if (error) {
-    // The function might return a specific error message in the response body
+    // Edge Function invocation error
     throw new Error(data?.error || error.message)
   }
+
+  // Check if the function returned an error in its response body
+  if (data?.error) {
+    throw new Error(data.error)
+  }
+
+  if (!data?.success) {
+    throw new Error('Failed to create staff user - unknown error')
+  }
+
   return data
 }
 
